{"version":3,"file":"bootstrapper.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAmB,UAAID,IAEvBD,EAAgB,UAAIC,IARtB,CASGK,MAAM,I,mBCRT,IAAIC,EAAsB,CCA1BA,EAAwB,CAACL,EAASM,KACjC,IAAI,IAAIC,KAAOD,EACXD,EAAoBG,EAAEF,EAAYC,KAASF,EAAoBG,EAAER,EAASO,IAC5EE,OAAOC,eAAeV,EAASO,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3EF,EAAwB,CAACQ,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,4BCAlF,MAAMI,EAAa,KACbC,EAAkB,eCUT,MAAMC,EACpBC,qBDTc,MACdC,YAAYC,GACXC,KAAKD,SAAWE,OAAOF,GAExBG,MAAMC,GAGL,OAFAA,EAAQF,OAAOE,IAELC,MAAMT,GACRQ,EACGA,EAAME,SAAS,OAASF,EAAMC,MAAMV,GACvC,UAAUS,IAEVH,KAAKD,SAASO,QAAQ,KAAMC,mBAAmBJ,MCDxDN,iBCbwB,EDcxBA,mBCf0B,EDgB1BA,iBEhBwB,EFiBxBA,iBEhBwB,EFiBxBA,gBEhBuB,EFiBvBA,gBEhBuB,EFiBvBA,iBEhBwB,EFiBxBA,kBEhByB,EFiBzBC,YAAYU,GACX,GAAgC,iBAArBA,EAAOC,UACjB,MAAM,IAAIC,UAAU,8BAGrBV,KAAKQ,OAASA,EAEdR,KAAKW,MAAQX,KAAKY,WAEnBC,iBACC,KAAM,kBAAmBC,WACxB,MAAM,IAAIC,MAAM,kDAMjB,MAAMC,EAAM,GAAGhB,KAAKQ,OAAOC,6BAA6BF,mBACvDU,KAAKC,UAAUlB,KAAKQ,WAGrBR,KAAKmB,aAAeL,UAAUM,cAAcR,SAASI,EAAK,CACzDK,MAAOrB,KAAKQ,OAAOC,UACnBa,eAAgB,eAGXtB,KAAKmB,OAAOI,SAEdvB,KAAKQ,OAAOgB,UEjDO,GFkDtBC,QAAQC,MAAM,kCAGhB,GAAMC,EAASX,GACd,MAAO,GAAGhB,KAAKQ,OAAOC,oBAAoBF,mBACzCoB,MACIpB,mBAAmBS,KAEzBY,KAAKZ,GACJ,OAAOhB,MAAK,EAAM,OAAQgB,GAE3Ba,IAAIb,GACH,OAAOhB,MAAK,EAAM,MAAOgB,GAE1Bc,GAAGd,GACF,OAAOhB,MAAK,EAAM,KAAMgB,GAEzBe,OAAOf,GACN,OAAOhB,MAAK,EAAM,SAAUgB,I","sources":["webpack://StompBoot/webpack/universalModuleDefinition","webpack://StompBoot/webpack/bootstrap","webpack://StompBoot/webpack/runtime/define property getters","webpack://StompBoot/webpack/runtime/hasOwnProperty shorthand","webpack://StompBoot/./Bootstrapper/SearchBuilder.js","webpack://StompBoot/./Bootstrapper/Bootstrapper.js","webpack://StompBoot/./TOMPConstants.js","webpack://StompBoot/./LoggerConstants.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"StompBoot\"] = factory();\n\telse\n\t\troot[\"StompBoot\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const whitespace = /\\s/;\r\nconst http_s_protocol = /^https?:\\/\\//;\r\n\r\nexport default class SearchBuilder {\r\n\tconstructor(template) {\r\n\t\tthis.template = String(template);\r\n\t}\r\n\tquery(input) {\r\n\t\tinput = String(input);\r\n\r\n\t\tif (input.match(http_s_protocol)) {\r\n\t\t\treturn input;\r\n\t\t} else if (input.includes('.') && !input.match(whitespace)) {\r\n\t\t\treturn `http://${input}`;\r\n\t\t} else {\r\n\t\t\treturn this.template.replace('%s', encodeURIComponent(input));\r\n\t\t}\r\n\t}\r\n}\r\n","import SearchBuilder from './SearchBuilder.js';\r\nimport {\r\n\tLOG_TRACE,\r\n\tLOG_DEBUG,\r\n\tLOG_INFO,\r\n\tLOG_WARN,\r\n\tLOG_ERROR,\r\n\tLOG_SILENT,\r\n} from '../LoggerConstants.js';\r\nimport { CODEC_PLAIN, CODEC_XOR } from '../TOMPConstants.js';\r\n\r\nexport default class Bootstrapper {\r\n\tstatic SearchBuilder = SearchBuilder;\r\n\t// expose constants\r\n\tstatic CODEC_XOR = CODEC_XOR;\r\n\tstatic CODEC_PLAIN = CODEC_PLAIN;\r\n\tstatic LOG_TRACE = LOG_TRACE;\r\n\tstatic LOG_DEBUG = LOG_DEBUG;\r\n\tstatic LOG_INFO = LOG_INFO;\r\n\tstatic LOG_WARN = LOG_WARN;\r\n\tstatic LOG_ERROR = LOG_ERROR;\r\n\tstatic LOG_SILENT = LOG_SILENT;\r\n\tconstructor(config) {\r\n\t\tif (typeof config.directory !== 'string') {\r\n\t\t\tthrow new TypeError(`Directory must be a string`);\r\n\t\t}\r\n\r\n\t\tthis.config = config;\r\n\r\n\t\tthis.ready = this.register();\r\n\t}\r\n\tasync register() {\r\n\t\tif (!('serviceWorker' in navigator))\r\n\t\t\tthrow new Error('Your browser does not support service workers.');\r\n\r\n\t\t/*for(let worker of await navigator.serviceWorker.getRegistrations()){\r\n\t\t\tawait worker.unregister();\r\n\t\t}*/\r\n\r\n\t\tconst url = `${this.config.directory}worker.js?config=${encodeURIComponent(\r\n\t\t\tJSON.stringify(this.config)\r\n\t\t)}`;\r\n\r\n\t\tthis.worker = await navigator.serviceWorker.register(url, {\r\n\t\t\tscope: this.config.directory,\r\n\t\t\tupdateViaCache: 'none',\r\n\t\t});\r\n\r\n\t\tawait this.worker.update();\r\n\r\n\t\tif (this.config.loglevel <= LOG_DEBUG) {\r\n\t\t\tconsole.debug('Registered the service worker.');\r\n\t\t}\r\n\t}\r\n\t#send(service, url) {\r\n\t\treturn `${this.config.directory}process:${encodeURIComponent(\r\n\t\t\tservice\r\n\t\t)}:${encodeURIComponent(url)}`;\r\n\t}\r\n\thtml(url) {\r\n\t\treturn this.#send('html', url);\r\n\t}\r\n\tcss(url) {\r\n\t\treturn this.#send('css', url);\r\n\t}\r\n\tjs(url) {\r\n\t\treturn this.#send('js', url);\r\n\t}\r\n\tbinary(url) {\r\n\t\treturn this.#send('binary', url);\r\n\t}\r\n}\r\n","export const CODEC_PLAIN = 0;\r\nexport const CODEC_XOR = 1;\r\n","export const LOG_TRACE = 0;\r\nexport const LOG_DEBUG = 1;\r\nexport const LOG_INFO = 2;\r\nexport const LOG_WARN = 3;\r\nexport const LOG_ERROR = 4;\r\nexport const LOG_SILENT = 5;\r\n\r\n/**\r\n * @typedef {LOG_TRACE|LOG_DEBUG|LOG_INFO|LOG_WARN|LOG_ERROR|LOG_SILENT} LOG_LEVELS\r\n */\r\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","whitespace","http_s_protocol","Bootstrapper","static","constructor","template","this","String","query","input","match","includes","replace","encodeURIComponent","config","directory","TypeError","ready","register","async","navigator","Error","url","JSON","stringify","worker","serviceWorker","scope","updateViaCache","update","loglevel","console","debug","service","html","css","js","binary"],"sourceRoot":""}